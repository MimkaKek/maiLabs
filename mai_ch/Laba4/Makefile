#======================================
# Параметры сборки
# TARGET - название исполняемого файла
# ILIB - директория, откуда могут браться библиотеки
# LSRC - нужные исходики, которые лежат в библиотеке
#======================================
TARGET  = main
ILIB    = ../Lib/
LSRC   := ODE.cpp functions.cpp matrix.cpp
#======================================


#======================================
# Параметры компиляции
# СС - компилятор
# CFLAGS - флаги для компиляции
#======================================
CC      = g++
CFLAGS  = -pedantic -Wall -Werror -Wno-sign-compare -Wno-long-long -lm -c
#======================================

LSRC   := $(LSRC: %=$(ILIB)%)

#======================================
# Тут подхватываются файлы .cpp
#======================================
SRC    := $(wildcard *.cpp) $(LSRC)
#======================================

OBJS   := $(SRC:$(ILIB)%=%)
OBJS   := $(OBJS:.cpp=.o)

.PHONY: all clean

all: $(TARGET)

$(TARGET): $(OBJS)
	$(CC) $(DEBUG) $^ -o $@
	
%.o: %.cpp %.hpp
	$(CC) $(CFLAGS) $(DEBUG) $<
	
%.o: $(ILIB)%.cpp $(ILIB)%.hpp
	$(CC) $(CFLAGS) $(DEBUG) $<

clean:
	rm *.o $(TARGET)
